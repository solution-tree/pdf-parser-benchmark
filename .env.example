# ──────────────────────────────────────────────
# Required
# ──────────────────────────────────────────────
OPENAI_API_KEY=sk-...

# ──────────────────────────────────────────────
# LLM / Embedding
# ──────────────────────────────────────────────
LLM_MODEL=gpt-4o
EMBED_MODEL=text-embedding-3-large
EMBED_DIMENSIONS=3072

# ──────────────────────────────────────────────
# Qdrant Vector Store
# ──────────────────────────────────────────────
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION=plc_books
# true = use local file path (dev), false = use QDRANT_URL (production)
USE_LOCAL_QDRANT=true

# ──────────────────────────────────────────────
# LLMSherpa (nlm-ingestor service for layout-aware PDF parsing)
# Run via Docker: docker run -p 5010:5010 ghcr.io/nlmatics/nlm-ingestor:latest
# ──────────────────────────────────────────────
LLMSHERPA_API_URL=http://localhost:5010/api/parseDocument?renderFormat=all

# ──────────────────────────────────────────────
# RAG
# ──────────────────────────────────────────────
CHUNK_SIZE=512
CHUNK_OVERLAP=64
SIMILARITY_TOP_K=5

# ──────────────────────────────────────────────
# Redis Cache
# ──────────────────────────────────────────────
REDIS_URL=redis://localhost:6379
CACHE_TTL_SECONDS=86400

# ──────────────────────────────────────────────
# Perplexity Web Search (optional)
# Leave blank to disable web search fallback
# ──────────────────────────────────────────────
PERPLEXITY_API_KEY=
PERPLEXITY_MODEL=llama-3.1-sonar-large-128k-online
# Trigger web search if best Qdrant score is below this threshold
WEB_SEARCH_SCORE_THRESHOLD=0.65

# ──────────────────────────────────────────────
# FastAPI Server (Alpha+)
# ──────────────────────────────────────────────
API_KEY=change-me-in-production
API_HOST=0.0.0.0
API_PORT=8000

# ──────────────────────────────────────────────
# PostgreSQL (Alpha+)
# ──────────────────────────────────────────────
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/plc_kb
